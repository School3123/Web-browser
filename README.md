# 🚀 Python 高速リモートブラウザ 取扱説明書

このシステムは、GitHub Codespaces（サーバー）側で動作するブラウザを、手元のブラウザから低遅延・高頻度でリモート操作するための専用ツールです。

---

## 1. セットアップ（初回のみ）

Codespacesのターミナルに以下のコマンドを順にコピー＆ペーストして実行してください。

```bash
# ライブラリのセットアップ
pip install flask playwright

# ブラウザ本体(Chromium)のインストール
playwright install chromium

# システム依存ファイルのインストール(必須)
sudo playwright install-deps chromium
```

---

## 2. 起動とアクセス

1.  **プログラムの起動**  
    ターミナルで `python app.py` を実行します。
2.  **ポートの公開設定（最重要）**  
    画像を表示するために、Codespacesの設定変更が必要です。  
    - 画面下の **「Ports」** タブをクリック。  
    - **Port 5000** の行にある **「Visibility」** をクリックし、`Private` から **`Public`** に変更します。  
3.  **ブラウザで開く**  
    右下のポップアップ、または「Ports」タブの地球儀アイコンをクリックして起動します。

---

## 3. 操作方法

*   **URL移動:**  
    上部バーにURLを入力し、`Go` をクリックまたは `Enter` キー。
*   **画面クリック:**  
    中央の画像内をクリックすると、リモートのブラウザに座標が転送されます。
*   **高速スクロール:**  
    マウスホイールまたはトラックパッドでのスクロールに対応しています（感度調整済み）。
*   **キー入力:**  
    URLバー以外を選択している状態でキーボード入力をすると、リモート側に反映されます。
*   **画像の固定:**  
    「画像の保存」メニューやドラッグ操作を禁止しているため、通常のアプリのようにストレスなく操作可能です。

---

## 4. 主な機能と特徴

| 特徴 | 内容 |
| :--- | :--- |
| **高速描写** | 画像読み込み完了と同時に次を要求する「オンロード・ポーリング」方式。 |
| **レスポンシブ** | サーバー解像度(1280x720)を、手元の画面サイズに合わせ自動スケーリング。 |
| **操作制限** | スマホの長押しメニュー禁止、PCの右クリック・ドラッグ禁止。 |
| **互換性** | Codespacesのプロキシを通しやすい HTTP 転送（中継はHTTPS）。 |

---

## 5. うまく動かないときは？

*   **画面が真っ白・画像が出ない:**  
    「Ports」タブで 5000 番が **`Public`** になっているか再確認してください。
*   **Internal Server Error と出る:**  
    サーバー側のメモリ不足、またはプロセスの立ち往生が原因です。ターミナルで `Ctrl + C` を押して停止し、再度 `python app.py` を実行してください。
*   **動作が重い:**  
    ネットワーク環境に依存します。`app.py` 内の `quality=50` をさらに下げる（例: `30`）と軽量化されます。

---

## 🛑 終了時の注意点
GitHub Codespaces のリソースを消費し続けるのを防ぐため、使用後は必ずターミナルで **`Ctrl + C`** を入力してプログラムを停止させてください。
